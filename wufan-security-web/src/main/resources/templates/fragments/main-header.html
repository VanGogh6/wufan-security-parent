<!--suppress ALL-->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!--头部菜单 Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="/" class="nav-link">Home</a>
        </li>
    </ul>


    <ul class="navbar-nav ml-auto">
        <!-- 个人中心下拉菜单 -->
        <li class="nav-item dropdown user user-menu">
            <a class="nav-link" data-toggle="dropdown"  href="#">
                <img  th:src="${#authentication.principal.imageUrl}"  src="../dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
            </a>
            <!-- -->
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-sm-right"
                 style="border-top-width: 1px; min-width: 150px; width: 100%;">
                <a href="#" class="dropdown-item" data-toggle="modal" data-target="#pwd" >
                    <i class="fa fa-key mr-2"></i> 修改密码
                </a>
                <div class="dropdown-divider"></div>
                <!--<a th:href="@{/logout}" href="login.html" class="dropdown-item" >-->
                <a th:href="@{/user/logout}" href="login.html" class="dropdown-item" >
                    <i class="fa fa-sign-out mr-2"></i> 退出系统
                </a>
            </div>
        </li>
        </li>
    </ul>
</nav>

<!--<button type="button" class="btn" data-toggle="modal" data-target="#pwd" >密码修改</button>-->

<div class="modal fade" id="pwd" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" >修改密码</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="editPassword" action="/editPassword" method="post">
                    <div class="form-group">
                        <label  class="col-form-label">输入密码:</label>
                        <input  id="password1" name="password1" type="password" class="form-control" placeholder="输入密码">
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">再次输入密码:</label>
                        <input id="password2" name="password2" type="password" class="form-control"  placeholder="输入密码">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" onclick="editPassword()" class="btn btn-primary">确认修改</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function editPassword(){
        let password1=$("#password1").val();
        let password2=$("#password2").val();
        if (password2!=password1){
            alert("输入的两次密码不一样！")
            return;
        }
        if (password2=="" || password1=="" || password2==null || password1==null){
            alert("密码不能为空！")
            return;
        }
        $("#editPassword").submit();
    }
</script>